"use strict";(self.webpackChunkblog_vuepress=self.webpackChunkblog_vuepress||[]).push([[6989],{1005:(i,l,e)=>{e.r(l),e.d(l,{comp:()=>r,data:()=>u});var s=e(8178);const a=e.p+"assets/img/1751892235483-cc6b3e7e-c0cb-4e9f-b480-dd4acdb91ed8.e43305c7.png",n=e.p+"assets/img/1751892235542-3719df8e-b14c-47d8-990e-125843864e6a.dd54d3bd.png",t=e.p+"assets/img/1751892235595-f587b7fb-1209-492c-bd9f-254570605650.05aac307.png",d=e.p+"assets/img/1751892235413-ce93cd14-880a-4188-933d-f7a5410a8ba2.45c9c101.png",o=e.p+"assets/img/1751892235653-17347cae-792d-4cf9-aeeb-8eac8b7fe543.b53f9c86.png",c=e.p+"assets/img/1751892235713-6b733456-c46b-4ca8-9e14-1f9744e953a5.e102ca46.png",h={},r=(0,e(6909).A)(h,[["render",function(i,l){return(0,s.uX)(),(0,s.CE)("div",null,l[0]||(l[0]=[(0,s.Fv)('<h1 id="wsl2安装" tabindex="-1"><a class="header-anchor" href="#wsl2安装"><span>WSL2安装</span></a></h1><h2 id="win11安装linux子系统" tabindex="-1"><a class="header-anchor" href="#win11安装linux子系统"><span>win11安装linux子系统</span></a></h2><ul><li>进入终端管理员</li><li><code>wsl --install --web-download</code>默认安装ubuntu</li><li>查看可以安装的linux版本：<code>wsl --list --online</code></li><li>安装制定linux：<code>wsl --install kali-linux --web-download</code></li><li>设置账号baicai，密码123456</li></ul><h2 id="查看安装的linux子系统" tabindex="-1"><a class="header-anchor" href="#查看安装的linux子系统"><span>查看安装的linux子系统</span></a></h2><ul><li><code>wsl --list -v</code>，前面带*表示当前的默认子系统，state表示子系统是否在运行</li><li>修改默认子系统：<code>wsl --set-default 子系统名字</code></li></ul><h2 id="启动linux子系统" tabindex="-1"><a class="header-anchor" href="#启动linux子系统"><span>启动linux子系统</span></a></h2><ul><li><code>wsl -d 子系统名字</code>，输入<code>exit</code>退出子系统</li></ul><h2 id="卸载子系统" tabindex="-1"><a class="header-anchor" href="#卸载子系统"><span>卸载子系统</span></a></h2><ul><li><code>wsl --unregister 子系统名字</code></li></ul><h2 id="备份子系统" tabindex="-1"><a class="header-anchor" href="#备份子系统"><span>备份子系统</span></a></h2><ul><li><code>wsl --export 子系统名字 压缩包名字</code>，如<code>wsl --export ubuntu ubuntu.tar</code></li></ul><h2 id="导入linux子系统" tabindex="-1"><a class="header-anchor" href="#导入linux子系统"><span>导入linux子系统</span></a></h2><ul><li><code>wsl --import 导入后的linux子系统名字 目的路径 压缩包路径</code>，比如<code>wsl --import ubuntu2 D:/wsl C:\\Users\\zhang\\Desktop\\ubuntu.tar</code></li><li>导入成功后，就在D:/wsl 下产生 .vdhx镜像文件（hyper-V文件），linux子系统的文件都存在这个镜像文件里面了</li></ul><h2 id="linux子系统和win11共享文件" tabindex="-1"><a class="header-anchor" href="#linux子系统和win11共享文件"><span>linux子系统和win11共享文件</span></a></h2><ul><li>linux子系统查看win11文件 <ul><li>在linux子系统中输入<code>df -h</code>，就能看到挂载卷，可以看到C、D、E盘都被挂载进来了，这种方式IO性能不好，对于频繁使用的文件，最好还是拷贝到linux子系统中。</li></ul></li><li>win11查看linux子系统文件</li></ul><figure><img src="'+a+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h2><ul><li>在linux子系统中可以运行win程序</li></ul><figure><img src="'+n+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+t+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>在win的命令行可以使用linux命令</li></ul><figure><img src="'+d+'" alt="这条命令前半部分是win命令，后半部分是linux命令" tabindex="0" loading="lazy"><figcaption>这条命令前半部分是win命令，后半部分是linux命令</figcaption></figure><h2 id="wslg" tabindex="-1"><a class="header-anchor" href="#wslg"><span>wslg</span></a></h2><ul><li>允许linux中带UI的程序直接以win窗口形式打开</li></ul><h2 id="显卡直通" tabindex="-1"><a class="header-anchor" href="#显卡直通"><span>显卡直通</span></a></h2><figure><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="wsl的高级配置" tabindex="-1"><a class="header-anchor" href="#wsl的高级配置"><span>wsl的高级配置</span></a></h2><ul><li><p>.wslconfig &amp; wsl.conf</p></li><li><p>.wslconfig是win上的文件，对于所有的linux子系统生效</p></li><li><p>wsl.conf在linux子系统里面的，只对某个linux子系统生效</p></li><li><p>更改完配置后，需要在PowerShell使用 <code>wsl --shutdown</code>把linux子系统关闭并等待8秒后重启生效</p></li><li><p>比如在Ubuntu启动systemd，</p><ul><li><p>在Ubuntu子系统中<code>sudo vim /etc/wsl.conf</code></p></li><li><p>添加：</p><ul><li><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  [boot]</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  systemd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><ul><li><p>在PowerShell中输入 <code>wsl --shutdown</code>（关闭所有wsl），等待8秒</p></li><li><p>进入Ubuntu子系统，输入<code>systemctl</code>，输入一下内容表示配置成功</p></li></ul></li></ul><figure><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>比如配置网络 <ul><li>Windows电脑IP为10.11.44.15，但是wsl ip地址为172.25.18.117，想让Windows和WSL共享相同的IP地址</li><li>在win用户目录(<code>C:\\Users\\zhang</code>)新建文件 .wslconfig，用记事本打开并添加<code>networkingMode=mirrored</code></li><li>在PowerShell中输入 <code>wsl --shutdown</code>（关闭所有wsl），等待8秒</li><li>再次进入wsl就能看到ip地址为10.11.44.15</li></ul></li></ul><h2 id="xshell远程连接wsl" tabindex="-1"><a class="header-anchor" href="#xshell远程连接wsl"><span>xshell远程连接wsl</span></a></h2><ul><li>卸载ssh server ：<code>sudo apt-get remove openssh-server</code></li><li>安装ssh server ：<code>sudo apt-get install openssh-server</code></li><li>修改ssh server配置：<code>sudo vim /etc/ssh/sshd_config</code></li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2222</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #默认的是22，但是windows有自己的ssh服务，也是监听的22端口，所以这里要改一下</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">UsePrivilegeSeparation</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PasswordAuthentication</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #允许密码登录</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AllowUsers</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> baicai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> demo1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 这里添加了用户baicai demo1 允许ssh登录</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动ssh server ：<code>sudo service ssh --full-restart</code></li></ul>',34)]))}]]),u=JSON.parse('{"path":"/posts/linux/win11%E5%AE%89%E8%A3%85linux%E5%AD%90%E7%B3%BB%E7%BB%9F.html","title":"WSL2安装","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2025-07-20T00:00:00.000Z","category":["Linux"],"tag":["WSL"],"description":"WSL2安装 win11安装linux子系统 进入终端管理员 wsl --install --web-download默认安装ubuntu 查看可以安装的linux版本：wsl --list --online 安装制定linux：wsl --install kali-linux --web-download 设置账号baicai，密码123456 查看...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"WSL2安装\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-07-20T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-21T03:06:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"白菜\\",\\"url\\":\\"https://github.com/baicai220\\"}]}"],["meta",{"property":"og:url","content":"https://baicai220.github.io/posts/linux/win11%E5%AE%89%E8%A3%85linux%E5%AD%90%E7%B3%BB%E7%BB%9F.html"}],["meta",{"property":"og:title","content":"WSL2安装"}],["meta",{"property":"og:description","content":"WSL2安装 win11安装linux子系统 进入终端管理员 wsl --install --web-download默认安装ubuntu 查看可以安装的linux版本：wsl --list --online 安装制定linux：wsl --install kali-linux --web-download 设置账号baicai，密码123456 查看..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-21T03:06:09.000Z"}],["meta",{"property":"article:tag","content":"WSL"}],["meta",{"property":"article:published_time","content":"2025-07-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-21T03:06:09.000Z"}]]},"git":{"createdTime":1753018233000,"updatedTime":1753067169000,"contributors":[{"name":"baicai","username":"baicai","email":"2650019220@qq.com","commits":2,"url":"https://github.com/baicai"}]},"readingTime":{"minutes":2.74,"words":823},"filePathRelative":"posts/linux/win11安装linux子系统.md","excerpt":"\\n<h2>win11安装linux子系统</h2>\\n<ul>\\n<li>进入终端管理员</li>\\n<li><code>wsl --install --web-download</code>默认安装ubuntu</li>\\n<li>查看可以安装的linux版本：<code>wsl --list --online</code></li>\\n<li>安装制定linux：<code>wsl --install kali-linux --web-download</code></li>\\n<li>设置账号baicai，密码123456</li>\\n</ul>","autoDesc":true}')},6909:(i,l)=>{l.A=(i,l)=>{const e=i.__vccOpts||i;for(const[i,s]of l)e[i]=s;return e}}}]);